"""
ÐÐ»ÑŒÑ‚ÐµÑ€Ð½Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ð¹ Ð³ÐµÐ½ÐµÑ€Ð°Ñ‚Ð¾Ñ€ Ð¾Ñ‚Ð²ÐµÑ‚Ð¾Ð² ÐºÐ¾Ð³Ð´Ð° OpenAI Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½
"""

import random

class FallbackAIGenerator:
    """Ð“ÐµÐ½ÐµÑ€Ð°Ñ‚Ð¾Ñ€ Ð¾Ñ‚Ð²ÐµÑ‚Ð¾Ð² Ð±ÐµÐ· Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ OpenAI API"""

    def __init__(self):
        self.responses = {
            "positive": [
                "Ð‘Ð»Ð°Ð³Ð¾Ð´Ð°Ñ€Ð¸Ð¼ Ð·Ð° Ð²Ð°Ñˆ Ð¾Ñ‚Ð·Ñ‹Ð², [Ð¸Ð¼Ñ]! ÐœÑ‹ Ñ€Ð°Ð´Ñ‹, Ñ‡Ñ‚Ð¾ Ð²Ð°Ð¼ Ð¿Ð¾Ð½Ñ€Ð°Ð²Ð¸Ð»ÑÑ Ð½Ð°Ñˆ Ñ‚Ð¾Ð²Ð°Ñ€.",
                "Ð¡Ð¿Ð°ÑÐ¸Ð±Ð¾ Ð·Ð° Ð²Ñ‹ÑÐ¾ÐºÑƒÑŽ Ð¾Ñ†ÐµÐ½ÐºÑƒ, [Ð¸Ð¼Ñ]! ÐŸÑ€Ð¸ÑÑ‚Ð½Ð¾ ÑÐ»Ñ‹ÑˆÐ°Ñ‚ÑŒ Ñ‚Ð°ÐºÐ¸Ðµ Ð¾Ñ‚Ð·Ñ‹Ð²Ñ‹.",
                "Ð‘Ð¾Ð»ÑŒÑˆÐ¾Ðµ ÑÐ¿Ð°ÑÐ¸Ð±Ð¾, [Ð¸Ð¼Ñ]! ÐœÑ‹ ÑÑ‚Ð°Ñ€Ð°ÐµÐ¼ÑÑ Ð´Ð»Ñ Ð½Ð°ÑˆÐ¸Ñ… Ð¿Ð¾ÐºÑƒÐ¿Ð°Ñ‚ÐµÐ»ÐµÐ¹.",
                "ÐžÐ³Ñ€Ð¾Ð¼Ð½Ð¾Ðµ ÑÐ¿Ð°ÑÐ¸Ð±Ð¾ Ð·Ð° Ð¾Ñ‚Ð·Ñ‹Ð², [Ð¸Ð¼Ñ]! Ð Ð°Ð´Ñ‹, Ñ‡Ñ‚Ð¾ Ð½Ð°Ñˆ Ñ‚Ð¾Ð²Ð°Ñ€ Ð²Ð°Ñ Ð¿Ð¾Ñ€Ð°Ð´Ð¾Ð²Ð°Ð».",
                "Ð‘Ð»Ð°Ð³Ð¾Ð´Ð°Ñ€Ð¸Ð¼ Ð·Ð° Ð²Ð°ÑˆÑƒ Ð¾Ñ†ÐµÐ½ÐºÑƒ, [Ð¸Ð¼Ñ]! ÐœÑ‹ Ñ†ÐµÐ½Ð¸Ð¼ Ð²Ð°ÑˆÐµ Ð¼Ð½ÐµÐ½Ð¸Ðµ."
            ],
            "neutral": [
                "Ð¡Ð¿Ð°ÑÐ¸Ð±Ð¾ Ð·Ð° Ð²Ð°Ñˆ Ð¾Ñ‚Ð·Ñ‹Ð², [Ð¸Ð¼Ñ]! ÐœÑ‹ ÑƒÑ‡Ñ‚ÐµÐ¼ Ð²Ð°ÑˆÐµ Ð¼Ð½ÐµÐ½Ð¸Ðµ.",
                "Ð‘Ð»Ð°Ð³Ð¾Ð´Ð°Ñ€Ð¸Ð¼ Ð·Ð° Ð¾Ð±Ñ€Ð°Ñ‚Ð½ÑƒÑŽ ÑÐ²ÑÐ·ÑŒ, [Ð¸Ð¼Ñ]! ÐœÑ‹ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÐ¼ Ð½Ð°Ð´ ÑƒÐ»ÑƒÑ‡ÑˆÐµÐ½Ð¸ÐµÐ¼.",
                "Ð¡Ð¿Ð°ÑÐ¸Ð±Ð¾ Ð·Ð° Ð¾Ñ†ÐµÐ½ÐºÑƒ, [Ð¸Ð¼Ñ]! Ð’Ð°ÑˆÐµ Ð¼Ð½ÐµÐ½Ð¸Ðµ Ð²Ð°Ð¶Ð½Ð¾ Ð´Ð»Ñ Ð½Ð°Ñ.",
                "Ð‘Ð»Ð°Ð³Ð¾Ð´Ð°Ñ€Ð¸Ð¼ Ð·Ð° Ð¾Ñ‚Ð·Ñ‹Ð², [Ð¸Ð¼Ñ]! ÐœÑ‹ Ð¿Ð¾ÑÑ‚Ð¾ÑÐ½Ð½Ð¾ ÑÐ¾Ð²ÐµÑ€ÑˆÐµÐ½ÑÑ‚Ð²ÑƒÐµÐ¼ Ð½Ð°Ñˆ ÑÐµÑ€Ð²Ð¸Ñ.",
                "Ð¡Ð¿Ð°ÑÐ¸Ð±Ð¾ Ð·Ð° Ð²Ð°ÑˆÐµ Ð¼Ð½ÐµÐ½Ð¸Ðµ, [Ð¸Ð¼Ñ]! ÐœÑ‹ Ð¿Ñ€Ð¸ÑÐ»ÑƒÑˆÐ°ÐµÐ¼ÑÑ Ðº Ð²Ð°ÑˆÐµÐ¼Ñƒ Ð¾Ñ‚Ð·Ñ‹Ð²Ñƒ."
            ],
            "negative": [
                "ÐŸÑ€Ð¸Ð½Ð¾ÑÐ¸Ð¼ Ð¸Ð·Ð²Ð¸Ð½ÐµÐ½Ð¸Ñ Ð·Ð° Ð½ÐµÑƒÐ´Ð¾Ð±ÑÑ‚Ð²Ð°, [Ð¸Ð¼Ñ]. ÐœÑ‹ Ñ€Ð°Ð·Ð±ÐµÑ€ÐµÐ¼ÑÑ Ð² ÑÐ¸Ñ‚ÑƒÐ°Ñ†Ð¸Ð¸.",
                "Ð¡Ð¾Ð¶Ð°Ð»ÐµÐµÐ¼ Ð¾ Ð²Ð¾Ð·Ð½Ð¸ÐºÑˆÐ¸Ñ… Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð°Ñ…, [Ð¸Ð¼Ñ]. ÐœÑ‹ Ð¿Ñ€Ð¸Ð¼ÐµÐ¼ Ð¼ÐµÑ€Ñ‹.",
                "Ð˜Ð·Ð²Ð¸Ð½Ð¸Ñ‚Ðµ Ð·Ð° Ð´Ð¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð½Ñ‹Ðµ Ð½ÐµÑƒÐ´Ð¾Ð±ÑÑ‚Ð²Ð°, [Ð¸Ð¼Ñ]. ÐœÑ‹ ÑƒÐ¶Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÐ¼ Ð½Ð°Ð´ Ñ€ÐµÑˆÐµÐ½Ð¸ÐµÐ¼.",
                "ÐŸÑ€Ð¸Ð½Ð¾ÑÐ¸Ð¼ ÑÐ²Ð¾Ð¸ Ð¸Ð·Ð²Ð¸Ð½ÐµÐ½Ð¸Ñ, [Ð¸Ð¼Ñ]. ÐœÑ‹ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð¸Ð¼ ÑÑ‚Ñƒ ÑÐ¸Ñ‚ÑƒÐ°Ñ†Ð¸ÑŽ.",
                "ÐŸÑ€Ð¾ÑÐ¸Ð¼ Ð¿Ñ€Ð¾Ñ‰ÐµÐ½Ð¸Ñ Ð·Ð° Ð½ÐµÑƒÐ´Ð¾Ð±ÑÑ‚Ð²Ð°, [Ð¸Ð¼Ñ]. ÐœÑ‹ ÑƒÐ¶Ðµ Ð·Ð°Ð½Ð¸Ð¼Ð°ÐµÐ¼ÑÑ ÑÑ‚Ð¸Ð¼ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ¾Ð¼."
            ]
        }

    def generate_reply(self, review_text: str, product_name: str = "",
                      rating: int = 5, user_name: str = "",
                      pros: str = "", cons: str = "") -> str:
        """Ð“ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÑ‚ Ð¾Ñ‚Ð²ÐµÑ‚ Ð½Ð° Ð¾ÑÐ½Ð¾Ð²Ðµ ÑˆÐ°Ð±Ð»Ð¾Ð½Ð¾Ð²"""

        # ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÐ¼ Ñ‚Ð¸Ð¿ Ð¾Ñ‚Ð·Ñ‹Ð²Ð° Ð¿Ð¾ Ñ€ÐµÐ¹Ñ‚Ð¸Ð½Ð³Ñƒ
        if rating >= 4:
            response_type = "positive"
        elif rating <= 2:
            response_type = "negative"
        else:
            response_type = "neutral"

        # Ð’Ñ‹Ð±Ð¸Ñ€Ð°ÐµÐ¼ ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½Ñ‹Ð¹ ÑˆÐ°Ð±Ð»Ð¾Ð½
        template = random.choice(self.responses[response_type])

        # Ð—Ð°Ð¼ÐµÐ½ÑÐµÐ¼ Ð¿Ð»ÐµÐ¹ÑÑ…Ð¾Ð»Ð´ÐµÑ€ Ð¸Ð¼ÐµÐ½Ð¸
        if user_name and user_name.strip():
            response = template.replace("[Ð¸Ð¼Ñ]", user_name.strip())
        else:
            response = template.replace("[Ð¸Ð¼Ñ]", "")

        # Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ ÑƒÐ¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ðµ Ñ‚Ð¾Ð²Ð°Ñ€Ð° ÐµÑÐ»Ð¸ ÐµÑÑ‚ÑŒ
        if product_name:
            response = response.replace("Ñ‚Ð¾Ð²Ð°Ñ€", f"Ñ‚Ð¾Ð²Ð°Ñ€ '{product_name}'")

        print(f"ðŸ“ Ð›Ð¾ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ ÑˆÐ°Ð±Ð»Ð¾Ð½: {response}")
        return response
