"""
Бесплатный AI генератор для тестирования
"""

import random

class FreeAIGenerator:
    """Генератор ответов с использованием бесплатных шаблонов"""

    def __init__(self):
        self.templates = {
            "positive": [
                "Большое спасибо за ваш отзыв, [имя]! Мы очень рады, что вам понравился наш товар.",
                "Благодарим за высокую оценку, [имя]! Приятно знать, что наш товар вас порадовал.",
                "Спасибо за ваш отзыв, [имя]! Мы стараемся для наших покупателей.",
                "Огромное спасибо за положительный отзыв, [имя]! Мы ценим ваше мнение.",
                "Благодарим за вашу оценку, [имя]! Рады, что наш товар соответствует ожиданиям."
            ],
            "neutral": [
                "Спасибо за ваш отзыв, [имя]! Мы учтем ваше мнение в дальнейшей работе.",
                "Благодарим за обратную связь, [имя]! Мы постоянно работаем над улучшением.",
                "Спасибо за оценку, [имя]! Ваше мнение помогает нам становиться лучше.",
                "Благодарим за отзыв, [имя]! Мы прислушаемся к вашим замечаниям.",
                "Спасибо за ваше мнение, [имя]! Мы анализируем все отзывы для улучшения сервиса."
            ],
            "negative": [
                "Приносим извинения за неудобства, [имя]. Мы обязательно разберемся в ситуации.",
                "Сожалеем о возникших проблемах, [имя]. Мы примем все необходимые меры.",
                "Извините за доставленные неудобства, [имя]. Мы уже работаем над решением.",
                "Приносим свои извинения, [имя]. Мы обязательно исправим эту ситуацию.",
                "Просим прощения за неудобства, [имя]. Мы внимательно изучим ваш отзыв."
            ]
        }

    def generate_reply(self, review_text, product_name="", rating=5, user_name="", pros="", cons=""):
        """Генерирует ответ на основе шаблонов"""

        # Определяем тип отзыва
        if rating >= 4:
            template_type = "positive"
        elif rating <= 2:
            template_type = "negative"
        else:
            template_type = "neutral"

        # Выбираем случайный шаблон
        template = random.choice(self.templates[template_type])

        # Заменяем имя
        if user_name and user_name.strip():
            response = template.replace("[имя]", user_name.strip())
        else:
            response = template.replace("[имя]", "")

        # Добавляем упоминание товара
        if product_name:
            response = response.replace("товар", f"товар '{product_name}'")

        print(f"🤖 Бесплатный AI: {response}")
        return response
